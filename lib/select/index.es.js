import{getCurrentInstance as e,defineComponent as t,ref as l,watch as n,onMounted as o,render as s,openBlock as a,createElementBlock as i,createElementVNode as d,normalizeClass as c,normalizeStyle as r,toDisplayString as u,renderSlot as p}from"vue";function f(e,t){let l=e[t],n=e.offsetParent;for(;null!==n;)l+=n[t],n=n.offsetParent;return l}var h=(e,t)=>{const l=e.__vccOpts||e;for(const[e,n]of t)l[e]=n;return l};const v=t({name:"TSelect",props:{width:{type:String,default:"200px"},placeholder:{type:String,default:"请选择"},defaultVisible:{type:Boolean,default:!1}},emits:[],setup(t,{slots:a}){const i=e().proxy,d=l(void 0),c=l(!1),r=l(void 0),u=l(void 0);function p(e){const t=document.createElement("div");s(e,t);const l=e.props&&(e.props.disabled||""===e.props.disabled);let n=u.value===e.el.wholeText?"t-select-option-choose":"t-select-option";return l?n+="-disabled":t.addEventListener("click",(()=>function(e){u.value=e.el.wholeText;for(let e=0;e<d.value.children.length;e++){const t=d.value.children[e],l=t.innerHTML===u.value;t.className=l?t.className.indexOf("disabled")>-1?"t-select-option-choose-disabled":"t-select-option-choose":t.className.indexOf("disabled")>-1?"t-select-option-disabled":"t-select-option"}c.value&&(c.value=!1)}(e))),t.className=n,t}return n(c,(()=>{if(d.value)if(c.value){const{x:e,y:t,clientHeight:l,clientWidth:n}=function(e){const{offsetWidth:t,offsetHeight:l,clientWidth:n,clientHeight:o}=e;return{x:f(e,"offsetLeft"),y:f(e,"offsetTop"),offsetWidth:t,offsetHeight:l,clientWidth:n,clientHeight:o}}(i.$el);d.value.style.background="white",d.value.style.left=`${e}px`,d.value.style.top=`${t+l}px`,d.value.style.width=`${n}px`,document.body.appendChild(d.value),d.value.focus(),i.$refs.headDom.style.pointerEvents="none"}else document.body.removeChild(d.value),i.$refs.headDom.style.pointerEvents="auto"})),o((()=>{const e=a.default()||[],l=document.createElement("div");e.forEach((e=>{e.type&&"TSelectOption"===e.type.name&&l.appendChild(p(e))})),e.length<1&&(l.style.minHeight="128px"),l.className="t-select-body",l.style.width=t.width,l.setAttribute("tabindex","0"),l.addEventListener("blur",(()=>c.value=!1)),d.value=l,c.value=t.defaultVisible})),{isExpand:c,currentValue:u,headDom:r}}}),m={class:"t-select"};var y=h(v,[["render",function(e,t,l,n,o,s){return a(),i("div",m,[d("div",{ref:"headDom",class:c("t-select-head"+(e.currentValue?"":"-placeholder")),style:r({width:e.width}),onClick:t[0]||(t[0]=t=>e.isExpand=!0)},u(e.currentValue||e.placeholder),7)])}]]);var b=h(t({name:"TSelectOption",props:{disabled:{type:Boolean,default:!1}},emits:[]}),[["render",function(e,t,l,n,o,s){return p(e.$slots,"default")}]]);y.install=function(e){e.component(y.name,y),e.component(b.name,b)};export{y as default};
